<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>알고리즘 연습</title>
  <link rel="stylesheet" href="./../css/style.css">
  <link rel="stylesheet" href="./../components/navbar/navbar.css" />
  <link rel="stylesheet" href="./../css/theme.css" />
  <script src="./../js/auth-guard.js"></script>
  <script type="module" src="./../js/ui-init.js"></script>
  <style>
    .algo-container{max-width:1100px;margin:20px auto;padding:0 12px}
    .flex{display:flex;gap:16px}
    .col{flex:1}
    .col-left{flex:0 0 28%}
    .col-center{flex:1}
    .col-right-sub{flex:0 0 28%}
    .card{border:1px solid var(--border);border-radius:10px;padding:14px;background:var(--surface); color: var(--text)}
    /* Equal heights for top row cards on desktop (fixed like screenshot) */
    .top-row { align-items: stretch; }
    .top-row > .card { height: 560px; overflow-y: auto; overflow-x: hidden; }
    .col-center.card { display:flex; flex-direction: column; }
    /* Keep title to a single line so editor area height doesn't change per problem */
    #problemTitle { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; min-height: 28px; margin-bottom: 6px; }
    /* Fix prompt area height; keep editor stable regardless of prompt length */
    #problemPrompt { flex: 0 0 140px; overflow-y:auto; overflow-x:hidden; margin-bottom: 8px; }
    #editor { flex: 1 1 0; height: auto !important; min-height: 320px; }
    .problem-list li{cursor:pointer;padding:8px 10px;border-bottom:1px solid var(--border); color: var(--text)}
    .problem-list li:hover{background: var(--surface-2)}
    .problem-list li.selected{ background: var(--accent); color: #1e1e2f; font-weight: 600; }
    .badge{font-size:12px;padding:2px 6px;border-radius:4px;background:var(--surface-2); color: var(--text)}
    .submissions{max-height:360px;overflow:auto}
    .comment{border-left:2px solid var(--border);margin:8px 0;padding-left:8px}
    h3 { color: var(--text); }
    /* Buttons & inputs */
    .btn{appearance:none;border:1px solid var(--border);background:var(--surface-2);color:var(--text);padding:8px 12px;border-radius:8px;cursor:pointer}
    .btn:hover{filter:brightness(1.08)}
    .btn-primary{background:var(--accent);color:#111;border-color:transparent}
    .btn-danger{background:#b34545;color:#fff;border-color:#b34545}
    select, textarea{border:1px solid var(--border);background:var(--surface-2);color:var(--text);border-radius:8px;padding:6px}
    /* Mobile responsive: stack cards */
    @media (max-width: 820px) {
      .flex { flex-direction: column; }
      .col-left, .col-right { flex: 1 1 auto; }
      /* Remove fixed heights on mobile for natural flow */
      .top-row > .card { height: auto; overflow: visible; }
      #problemPrompt { max-height: none; }
      #editor { height: 360px !important; min-height: 260px; }
    }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/ace-builds@1.32.3/src-min-noconflict/ace.js"></script>
</head>
<body>
  <header>
    <h1>알고리즘 연습</h1>
    <div id="navbar"></div>
  </header>
  <div id="loading-bar" style="display:none; position:fixed; top:0; left:0; height:3px; background:#7de1f9; width:0%; transition: width 0.3s;"></div>

  <div class="algo-container">
    <p>매일 3문제가 자동 선정됩니다.</p>
    <div class="flex top-row">
      <div class="col-left card">
        <h3>오늘의 문제</h3>
        <ul id="problemList" class="problem-list"></ul>
      </div>
      <div class="col-center card">
        <h3 id="problemTitle">문제를 선택하세요</h3>
        <div id="problemPrompt" style="white-space:pre-wrap"></div>
        <div id="editor" style="margin:12px 0;border:1px solid var(--border);"></div>
        <div style="display:flex;align-items:center;gap:8px;flex-wrap:wrap">
          <label>
            언어
            <select id="language">
              <option value="javascript">JavaScript</option>
              <option value="python">Python</option>
            </select>
          </label>
          <button id="insertTplBtn" class="btn">템플릿 삽입</button>
          <button id="runBtn" class="btn btn-primary">실행</button>
          <button id="submitBtn" class="btn" disabled>제출</button>
        </div>
        <div id="runHint" style="margin-top:6px; font-size:12px; color: var(--muted);">
          JS 실행 가이드: <code>function solve(input){ /* ... */ return output }</code> 형태로 구현하고 실행을 누르세요. 예시 입력들로 자동 검증합니다.
        </div>
        <div id="runOutput" class="card" style="margin-top:8px; padding:10px; background:var(--surface-2); min-height:48px;">
          <div style="font-weight:700; margin-bottom:6px;">실행 결과</div>
          <pre id="runLog" style="margin:0; white-space:pre-wrap"></pre>
        </div>
      </div>
    </div>
    <div class="card" style="margin-top:16px">
      <h3>제출 내역</h3>
      <ul id="submissions" class="submissions"></ul>
    </div>
    <div class="card" style="margin-top:16px">
      <h3>선택한 제출 상세 및 코드 리뷰</h3>
      <div id="submissionDetail"></div>
      <div id="comments"></div>
      <div id="commentForm" style="display:none">
        <textarea id="commentText" rows="3" style="width:100%" placeholder="댓글을 입력하세요..."></textarea>
        <button id="commentSubmit" class="btn btn-primary">댓글 등록</button>
      </div>
    </div>
  </div>
  <script type="module">
    import { loadNavbar } from './../components/navbar/navbar.js';
    loadNavbar();
  </script>
  <script src="/js/algorithms.js?v=20250901-1"></script>
</body>
</html>
